Title: Plugin Kosong
Author: Taufik Nurrohman
Version: 1.0.0

====

> Ini cuma sebagai panduan dasar pembuatan plugin.

### Lakukan Sesuatu Saat Data Formulir Dikirimkan

Standar URL pengiriman pada formulir harus diarahkan menuju URL ini:

~~~ .no-highlight
{{url}}manager/plugin/folder-plugin/update
~~~

Anda seharusnya bisa membuatnya dengan mudah melalui ini:

~~~ .php
Config::get('url') . '/' . Config::get('manager')->slug . '/plugin/' . basename(__DIR__) . '/update';
~~~

Atau, mengingat Anda sudah memiliki URL plugin pada halaman yang sedang Anda lihat saat ini, maka Anda bisa menggunakan cara ini:

~~~ .php
Config::get('url_current') . '/update';
~~~

#### Formulir

Berikut ini adalah struktur formulir dasar untuk konfigurasi plugin. Ini adalah item _shield_, jadi Anda bisa menggunakan variabel pintasan `$config` dan `$speak` dari sini:

~~~ .html
<form action="<?php echo $config->url_current; ?>/update" method="post">

  <!-- Mohon tambahkan input token -->
  <input name="token" type="hidden" value="<?php echo $token; ?>">

  <!-- Letakkan elemen-elemen formulir yang lain di sini… -->

  <!-- Tombol eksekusi formulir -->
  <p><button type="submit">Perbaharui</button></p>

</form>
~~~

Tempatkan formulir tersebut di dalam berkas `configurator.php`.

#### Rute

Buat sebuah rute menuju _path_ manajer plugin + `/update` relatif ke URL halaman muka untuk melaksanakan aksi `POST` pada formulir:

~~~ .php
$config = Config::get();
$speak = Config::speak();

Route::accept($config->manager->slug . '/plugin/' . basename(__DIR__) . '/update', function() use($config, $speak) {

    if( ! Guardian::happy()) {
        Shield::abort(); // [1]
    }

    if(Request::post()) {

        Guardian::checkToken(Request::post('token')); // [2]

        File::write('test!')->saveTo(PLUGIN . DS . basename(__DIR__) . DS . 'states' . DS . 'test.txt', 0600);

        Notify::success('Plugin updated.'); // [3]

        Guardian::kick(dirname($config->url_current)); // [4]

    }

});
~~~

No. | Deskripsi
--: | -------------------------------------------------------------------------
1.  | Jangan izinkan pengguna non pilot dan penumpang untuk melakukan submisi.
2.  | Cek input token. Jika tidak cocok, arahkan pengguna menuju halaman login.
3.  | Buat sebuah pesan sukses pada saat pengiriman berhasil dilakukan.
4.  | Arahkan pengguna menuju URL sebelumnya setelah semuanya selesai.

Mengerti?

*[URL]: Uniform Resource Locator